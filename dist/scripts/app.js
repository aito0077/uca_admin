"use strict";angular.module("config",[]).constant("api_host","http://uca.collab-dev.com").value("debug",!0),function(){angular.module("app",["ngAnimate","ngAria","ngResource","ngMaterial","ui.router","ui.bootstrap","ui.tree","ngMap","ngTagsInput","textAngular","angular-loading-bar","duScroll","satellizer","lr.upload","app.nav","app.page","app.i18n","config","app.services","app.account","app.users","app.pages","app.activities","app.organizations"])}(),function(){angular.module("app").config(["$stateProvider","$urlRouterProvider","$authProvider","api_host",function(a,b,c,d,e){function f(a,b){var c=a.defer();return b.isAuthenticated()?c.reject():c.resolve(),c.promise}function g(a,b,c,d){var e=a.defer();return d.isAuthenticated()?e.resolve():b.path("/login"),e.promise}var h,i;h=["uca/activities/list","uca/pages/list","uca/organizations/list","uca/sliders/list","uca/users/list","uca/users/edit"],i=function(b){var c,d;return d="/"+b,c={url:d,templateUrl:"views/"+b+".html",resolve:{loginRequired:g}},a.state(b,c),a},h.forEach(function(a){return i(a)}),a.state("login",{url:"/login",templateUrl:"views/uca/account/signin.html",resolve:{skipIfLoggedIn:f}}).state("home",{url:"/",templateUrl:"views/dashboard.html",resolve:{loginRequired:g}}).state("dashboard",{url:"/dashboard",templateUrl:"views/dashboard.html",resolve:{loginRequired:g}}).state("user-view",{url:"/user-view/:userId",templateUrl:"views/uca/users/view.html",resolve:{loginRequired:g}}).state("page-new",{url:"/page-new",templateUrl:"views/uca/pages/edit.html",resolve:{loginRequired:g}}).state("page-edit",{url:"/page-edit/:pageId",templateUrl:"views/uca/pages/edit.html",resolve:{loginRequired:g}}).state("activity-new",{url:"/activity-new/:type/:id",templateUrl:"views/uca/activities/edit.html",resolve:{loginRequired:g}}).state("activity-edit",{url:"/activity-edit/:activityId",templateUrl:"views/uca/activities/edit.html",resolve:{loginRequired:g}}).state("activity-view",{url:"/activity-view/:activityId",templateUrl:"views/uca/activities/view.html",resolve:{loginRequired:g}}).state("organization-new",{url:"/organization-new",templateUrl:"views/uca/organizations/edit.html",resolve:{loginRequired:g}}).state("organization-edit",{url:"/organization-edit/:organizationId",templateUrl:"views/uca/organizations/edit.html",resolve:{loginRequired:g}}).state("organization-view",{url:"/organization-view/:organizationId",templateUrl:"views/uca/organizations/view.html",resolve:{loginRequired:g}}).state("signin",{url:"/signup",templateUrl:"views/uca/account/signup.html",resolve:{skipIfLoggedIn:f}}),b.otherwise("/login"),c.baseUrl=d+"/",c.httpInterceptor=!0,c.signupRedirect=null}])}(),function(){function a(a,b,c,d){var e=new Date,f=e.getFullYear();a.main={brand:"UCA - Pabellon",name:"Lisa",year:f},a.pageTransitionOpts=[{name:"Desde arriba","class":"animate-fade-up"},{name:"Aumentar","class":"ainmate-scale-up"},{name:"Desde la derecha","class":"ainmate-slide-in-right"},{name:"Girar","class":"animate-flip-y"}],a.admin={layout:"wide",menu:"vertical",fixedHeader:!0,fixedSidebar:!0,pageTransition:a.pageTransitionOpts[0],skin:"22"},a.color={primary:"#59BC6C",success:"#4CAF50",info:"#00BCD4",infoAlt:"#673AB7",warning:"#FFC107",danger:"#F44336",gray:"#DCDCDC"},b.$on("$stateChangeSuccess",function(a,b,c){d.scrollTo(0,0)})}function b(a){a.theme("default").primaryPalette("indigo",{"default":"500"}).accentPalette("cyan",{"default":"500"}).warnPalette("red",{"default":"500"}).backgroundPalette("grey")}angular.module("app").controller("AppCtrl",["$scope","$rootScope","$state","$document",a]).config(["$mdThemingProvider",b])}(),function(){function a(a){a.useStaticFilesLoader({prefix:"i18n/",suffix:".json"}),a.preferredLanguage("es")}function b(a,b){a.lang="Español",a.setLang=function(c){switch(c){case"English":b.use("en");break;case"Español":b.use("es");break;case"中文":b.use("zh");break;case"日本語":b.use("ja");break;case"Portugal":b.use("pt");break;case"Русский язык":b.use("ru")}return a.lang=c},a.getFlag=function(){var b;switch(b=a.lang){case"English":return"flags-american";case"Español":return"flags-spain";case"中文":return"flags-china";case"Portugal":return"flags-portugal";case"日本語":return"flags-japan";case"Русский язык":return"flags-russia"}}}angular.module("app.i18n",["pascalprecht.translate"]).config(["$translateProvider",a]).controller("LangCtrl",["$scope","$translate",b])}(),function(){angular.module("app.nav",[])}(),function(){function a(a){function b(b,c,d){var e;e=$("#app"),c.on("click",function(b){return e.hasClass("nav-collapsed-min")?e.removeClass("nav-collapsed-min"):(e.addClass("nav-collapsed-min"),a.$broadcast("nav:reset")),b.preventDefault()})}var c={restrict:"A",link:b};return c}function b(){function a(a,b,c){var d,e,f,g,h,i,j,k,l,m,n;m=250,j=$(window),g=b.find("ul").parent("li"),g.append('<i class="fa fa-angle-down icon-has-ul-h"></i><i class="fa fa-angle-right icon-has-ul"></i>'),d=g.children("a"),h=b.children("li").not(g),e=h.children("a"),f=$("#app"),i=$("#nav-container"),d.on("click",function(a){var b,c;return f.hasClass("nav-collapsed-min")||i.hasClass("nav-horizontal")&&j.width()>=768?!1:(c=$(this),b=c.parent("li"),g.not(b).removeClass("open").find("ul").slideUp(m),b.toggleClass("open").find("ul").stop().slideToggle(m),void a.preventDefault())}),e.on("click",function(a){g.removeClass("open").find("ul").slideUp(m)}),a.$on("nav:reset",function(a){g.removeClass("open").find("ul").slideUp(m)}),k=void 0,l=j.width(),n=function(){var a;a=j.width(),768>a&&f.removeClass("nav-collapsed-min"),768>l&&a>=768&&i.hasClass("nav-horizontal")&&g.removeClass("open").find("ul").slideUp(m),l=a},j.resize(function(){var a;clearTimeout(a),a=setTimeout(n,300)})}var b={restrict:"A",link:a};return b}function c(){function a(a,b,c,d){var e,f,g;f=b.find("a"),g=function(){return d.path()},e=function(a,b){return b="#"+b,angular.forEach(a,function(a){var c,d,e;return d=angular.element(a),c=d.parent("li"),e=d.attr("href"),c.hasClass("active")&&c.removeClass("active"),0===b.indexOf(e)?c.addClass("active"):void 0})},e(f,d.path()),a.$watch(g,function(a,b){return a!==b?e(f,d.path()):void 0},!0)}var b={restrict:"A",controller:["$scope","$element","$attrs","$location",a]};return b}function d(){function a(a,b,c){b.on("click",function(){return $("#app").toggleClass("on-canvas")})}var b={restrict:"A",link:a};return b}angular.module("app.nav").directive("toggleNavCollapsedMin",["$rootScope",a]).directive("collapseNav",b).directive("highlightActive",c).directive("toggleOffCanvas",d)}(),function(){angular.module("app.page",[])}(),function(){function a(a,b,c){a.login=function(){c.url("/")},a.signup=function(){c.url("/")},a.reset=function(){c.url("/")},a.unlock=function(){c.url("/")}}angular.module("app.page").controller("authCtrl",["$scope","$window","$location",a])}(),function(){function a(){function a(a,b,c){var d,e;e=function(){return c.path()},d=function(a){switch(b.removeClass("body-wide body-err body-lock body-auth"),a){case"/404":case"/pages/404":case"/pages/500":return b.addClass("body-wide body-err");case"/login":case"/signup":case"/slam/account/signin":case"/slam/account/signup":case"/pages/signin":case"/pages/signin":case"/pages/signup":case"/pages/forgot-password":return b.addClass("body-wide body-auth");case"/pages/lock-screen":return b.addClass("body-wide body-lock")}},d(c.path()),a.$watch(e,function(a,b){return a!==b?d(c.path()):void 0},!0)}var b={restrict:"A",controller:["$scope","$element","$location",a]};return b}angular.module("app.page").directive("customPage",a)}(),function(){angular.module("app.services",[]).factory("logger",[function(){var a;return toastr.options={closeButton:!0,positionClass:"toast-bottom-right",timeOut:"3000"},a=function(a,b){return toastr[b](a)},{log:function(b){a(b,"info")},logWarning:function(b){a(b,"warning")},logSuccess:function(b){a(b,"success")},logError:function(b){a(b,"error")}}}]).factory("Organization",["$resource","api_host",function(a,b){return a(b+"/api/organizations/:id",{id:"@id"},{update:{method:"PUT"}})}]).factory("Center",["$resource","api_host",function(a,b){return a(b+"/api/centers/:id",{id:"@id"},{update:{method:"PUT"}})}]).factory("User",["$resource","api_host",function(a,b){return a(b+"/api/users/:id",{id:"@id"},{update:{method:"PUT"}})}]).factory("Role",["$resource","api_host",function(a,b){return a(b+"/api/roles/:id",{id:"@id"},{update:{method:"PUT"}})}]).factory("Account",["$http","$rootScope","$auth","$location","api_host",function(a,b,c,d,e){return{profile:!1,profile_id:!1,fetching:!1,roles:[],centers:[],organizations:[],getProfile:function(f){var g=this;if(!c.isAuthenticated())return void(f&&g.listen(f));if(g.profile){if(!f)return this.profile;f(g.profile)}return g.fetching?(g.listen(f),!1):(g.fetching=!0,a.get(e+"/api/me").success(function(a){g.fetching=!1,null==a.user?(c.logout(),g.profile=!1,g.profile_id=!1,b.account=!1,g.broadcast(),d.url("/")):(g.profile=a.user,g.profile_id=g.profile.id,b.account=g.profile,g.centers=g.profile.centers,g.organizations=g.profile.organizations,g.roles=g.profile.roles,g.broadcast()),f&&f(g.profile)})["catch"](function(a){c.logout(),g.profile=!1,g.profile_id=!1,g.broadcast()}))},hasRole:function(a){var b=_.find(this.roles,function(b){return b.name==a});return b?!0:!1},logout:function(){c.isAuthenticated()&&(this.profile=!1,this.profile_id=!1,b.account=!1,this.broadcast(),c.logout())},getStatus:function(){return a.get(e+"/api/me/status")},updateProfile:function(b){return a.put(e+"/api/me",b)},broadcast:function(){b.$broadcast("account",this.profile)},listen:function(a){b.$on("account",function(b,c,d){c&&a(c)})}}}]).factory("Page",["$resource","api_host",function(a,b){return a(b+"/api/pages/:id",{id:"@id"},{update:{method:"PUT"}})}]).factory("Activity",["$resource","api_host",function(a,b){return a(b+"/api/activities/:id",{id:"@id"},{update:{method:"PUT"}})}]).factory("Product",["$resource","api_host",function(a,b){return a(b+"/api/products/:id",{id:"@id"},{update:{method:"PUT"}})}]).factory("GeoPoint",["$resource","api_host",function(a,b){return a(b+"/api/geopoints/:id",{id:"@id"},{update:{method:"PUT"}})}]).factory("User",["$resource","api_host",function(a,b){return a(b+"/api/users/:id",{id:"@id"},{update:{method:"PUT"}})}]).filter("moment",function(){return function(a,b){return moment(a).format(b)}})}(),function(){angular.module("app.account",[])}(),function(){function a(a,b,c){a.profile={},c.getProfile(function(b){a.profile=b}),a.logout=function(){a.profile={},c.logout(),b.path("/login")}}angular.module("app.account").controller("loginController",["$scope","$window","$auth","$http","$state","api_host","logger","Account",function(a,b,c,d,e,f,g,h){a.normal_action=!0,a.reset_action=!1,a.user={},a.doLogin=function(){c.login({email:a.user.email,password:a.user.password}).then(function(b){h.getProfile(function(b){a.account=b,e.go("dashboard"),g.log("Estás adentro!")})})["catch"](function(a){g.logError("Usuario o clave inválidos")})},a.doResetPassword=function(){d.post(f+"/password/email",{email:a.user.email_reset}).success(function(b){g.log("Se envió mail con nueva contraseña!"),a.normal_action=!0,a.reset_action=!1}).error(function(a){g.logError("Hubo un inconveniente")})},a.doReset=function(){a.normal_action=!1,a.reset_action=!0},a.doNormal=function(){a.normal_action=!0,a.reset_action=!1}}]).controller("sidebar-controller",["$scope","$auth","$state","logger","Account",function(a,b,c,d,e){a.centers=[],a.organizations=[],a.roles=[],e.getProfile(function(b){a.account=e.profile,a.profile=b,a.organizations=b.organizations,a.centers=b.centers,a.roles=b.roles}),a.viewCenter=function(a){c.go("center-view",{centerId:a})},a.viewOrganization=function(a){c.go("organization-view",{organizationId:a})},a.hasRole=function(a){return e.hasRole(a)}}]).controller("session-bar-controller",["$scope","$location","Account",a])}(),function(){angular.module("app.pages",[])}(),function(){function a(a,b,c,d){a.pages=[],d.query(function(b){a.pages=b}),a.view=function(a){c.go("page-view",{pageId:a})},a.edit=function(a){c.go("page-edit",{pageId:a})}}function b(a,b,c,d,e,f,g,h){a.page={},b.pageId?h.get({id:b.pageId},function(b){a.page=b,a.setup_component()}):(a.page=new h({}),e(function(){a.setup_component()},1e3)),a.canSubmit=function(){return a.page_form.$valid},a.revert=function(){a.page=new h({})},a.submitForm=function(){a.page.id?a.page.$update(function(){f.logSuccess("La página fue actualizada con éxito!"),d.url("/uca/pages/list")})["catch"](function(a){}):a.page.$save(function(){f.logSuccess("La página fue guardada"),d.url("/uca/pages/list")})["catch"](function(a){})},b.pageId&&h.get({id:b.pageId},function(b){a.page=b}),a.setup_component=function(){},a.upload_url=g+"/api/media/upload",a.uploading=!1,a.onUpload=function(b){a.uploading=!0},a.onError=function(b){a.uploading=!1},a.onComplete=function(b){a.uploading=!1,a.page.main_picture=b.data.filename},e(function(){a.setup_component()},1e3)}angular.module("app.pages").controller("pages-list",["$scope","$window","$state","Page",a]).controller("pages-edit",["$scope","$stateParams","$state","$location","$timeout","logger","api_host","Page",b])}(),function(){angular.module("app.activities",[])}(),function(){function a(a,b,c,d){a.activities=[],d.query(function(b){a.activities=b}),a.view=function(a){c.go("activity-view",{activityId:a})},a.edit=function(a){c.go("activity-edit",{activityId:a})}}function b(a,b,c,d,e,f,g,h){if(a.activity={},b.activityId)h.get({id:b.activityId},function(b){a.activity=b,a.setup_component()});else{var i="center"===b.type?"1":"0";a.activity=new h({center_activity:i,center_id:1==i?b.id:null,organization_id:0==i?b.id:null}),e(function(){a.setup_component()},1e3)}a.canSubmit=function(){return a.activity_form.$valid},a.revert=function(){a.activity=new h({})},a.submitForm=function(){a.activity.id?a.activity.$update(function(){f.logSuccess("La actividad fue actualizada"),c.go("activity-view",{activityId:a.activity.id})})["catch"](function(a){}):a.activity.$save(function(){f.logSuccess("La actividad fue creada"),c.go("activity-view",{activityId:a.activity.id})})["catch"](function(a){})},a.setup_component=function(){var b=document.getElementById("activity-location"),c={types:["address"],componentRestrictions:{country:"ar"}},d=new google.maps.places.Autocomplete(b,c);d.addListener("place_changed",function(){var b=d.getPlace();a.activity.location=_.extend(b,{coordinates:b.geometry.location.toJSON()})}),jQuery("#activity_event_date").bootstrapMaterialDatePicker({format:"DD MM YYYY HH:mm",minDate:new Date,currentDate:a.activity.event_date,lang:"es"}).on("change",function(b,c){a.activity.event_date=c})},a.upload_url=g+"/api/media/upload",a.uploading=!1,a.onUpload=function(b){a.uploading=!0},a.onError=function(b){a.uploading=!1},a.onComplete=function(b){a.uploading=!1,a.activity.main_picture=b.data.filename,a.activity.media_id=b.data.media_id}}function c(a,b,c,d,e,f){a.activity={},c.get({id:f.activityId},function(b){a.activity=b}),a.edit=function(a){e.go("activity-edit",{activityId:a})}}angular.module("app.activities").controller("activity-list",["$scope","$window","$state","Activity",a]).controller("activity-edit",["$scope","$stateParams","$state","$location","$timeout","logger","api_host","Activity",b]).controller("activity-view",["$scope","$window","Activity","$location","$state","$stateParams",c]).controller("activity-medias",["$scope","$http","$state","api_host","logger","Organization",function(a,b,c,d,e,f){a.media={},a.adding_media=!1,a.getUploadUrl=function(){return d+"/api/media/activity/"+a.activity.id+"/upload"},a.uploading=!1,a.addMedia=function(){a.adding_media=!0},a.selectAsMainPicture=function(c){b.post(d+"/api/activity/"+a.activity.id+"/mainPicture/"+c.id,{}).success(function(b){a.activity.main_picture=b.name,e.logSuccess("Se estableció imagen como principal")})},a.cancelUpload=function(){a.media={},a.adding_media=!1,a.media={}},a.onUpload=function(b){a.uploading=!0},a.onError=function(b){e.logError("Surgió un error al subir imagen."),a.uploading=!1},a.onComplete=function(b){e.logSuccess("Se agregó imagen con éxito!"),a.uploading=!1,a.adding_media=!1,a.media={},a.fetchMedias()},a.fetchMedias=function(){b.get(d+"/api/activity/"+a.activity.id+"/medias").success(function(b){a.medias=b})}}])}(),function(){angular.module("app.organizations",[])}(),function(){angular.module("app.organizations").controller("organization-edit",["$scope","$window","$location","$state","$stateParams","$timeout","api_host","logger","Organization",function(a,b,c,d,e,f,g,h,i){a.organization={},e.organizationId?i.get({id:e.organizationId},function(b){a.organization=b,a.setup_component()}):(a.organization=new i({what_for_title:"Para qué?",how_title:"Cómo?",why_title:"Para qué?"}),f(function(){a.setup_component()},1e3)),a.refresh=function(){i.get({id:e.organizationId},function(b){a.organization=b,a.setup_component()})},a.canSubmit=function(){return a.organization_form.$valid},a.revert=function(){a.organization=new i({})},a.submitForm=function(){a.organization.id?a.organization.$update(function(){h.logSuccess("La muestra fue actualizado con éxito!"),d.go("organization-view",{organizationId:a.organization.id})})["catch"](function(a){h.logError(a.message)}):a.organization.$save(function(){h.logSuccess("La muestra fue creado con éxito!"),d.go("organization-view",{organizationId:a.organization.id})})["catch"](function(a){h.logError(a.message)})},a.setup_component=function(){jQuery("#organization_start_date").bootstrapMaterialDatePicker({format:"DD MM YYYY HH:mm",minDate:new Date,currentDate:a.organization.start_event_date,lang:"es"}).on("change",function(b,c){a.organization.start_event_date=c}),jQuery("#organization_end_date").bootstrapMaterialDatePicker({format:"DD MM YYYY HH:mm",minDate:new Date,currentDate:a.organization.finish_event_date,lang:"es"}).on("change",function(b,c){a.organization.finish_event_date=c})},a.upload_url=g+"/api/media/upload",a.uploading=!1,a.onUpload=function(b){a.uploading=!0},a.onError=function(b){a.uploading=!1},a.onComplete=function(b){a.uploading=!1,a.organization.main_picture=b.data.filename,a.organization.media_id=b.data.media_id}}]).controller("organizations-list",["$scope","$http","$state","api_host","Organization",function(a,b,c,d,e){e.query(function(b){a.organizations=b}),a.view=function(a){c.go("organization-view",{organizationId:a})},a.edit=function(a){c.go("organization-edit",{organizationId:a})}}]).controller("organization-view",["$scope","$window","Organization","$location","$state","$stateParams","api_host",function(a,b,c,d,e,f,g){a.organization={},a.show_activities=!1,a.show_medias=!0,a.show_geopoints=!1,c.get({id:f.organizationId},function(b){a.organization=b,a.activities=a.organization.activities,a.medias=a.organization.medias,a.upload_url=g+"/api/media/organization/"+a.organization.id+"/upload"}),a.showActivities=function(){a.show_activities=!0,a.show_products=!1,a.show_medias=!1,a.show_geopoints=!1},a.showMedias=function(){a.show_activities=!1,a.show_medias=!0},a.edit=function(a){e.go("organization-edit",{organizationId:a})}}]).controller("organization-activities",["$scope","$state",function(a,b){a.activities_dates=[],a.viewActivity=function(a){b.go("activity-view",{activityId:a})},a.addActivity=function(){b.go("activity-new",{type:"organization",id:a.organization.id})},a.process_dates=function(){a.activities_dates=_.groupBy(a.activities,function(a){return moment(a.event_date).startOf("day")})},a.process_dates()}]).controller("organization-medias",["$scope","$http","$state","api_host","logger","Organization",function(a,b,c,d,e,f){a.media={},a.adding_media=!1,a.uploading=!1,a.addMedia=function(){a.adding_media=!0},a.selectAsMainPicture=function(c){b.post(d+"/api/organization/"+a.organization.id+"/mainPicture/"+c.id,{}).success(function(b){a.organization.main_picture=b.name,e.logSuccess("Se estableció imagen como principal")})},a.cancelUpload=function(){a.media={},a.adding_media=!1},a.onUpload=function(b){a.uploading=!0},a.onError=function(b){e.logError("Surgió un error al subir imagen."),a.uploading=!1},a.onComplete=function(b){e.logSuccess("Se agregó imagen con éxito!"),a.uploading=!1,a.adding_media=!1,a.fetchMedias()},a.fetchMedias=function(){b.get(d+"/api/organization/"+a.organization.id+"/medias").success(function(b){a.medias=b})}}])}(),function(){angular.module("app.users",[])}(),function(){function a(a,b,c,d){a.users=[],d.query(function(b){a.users=b}),a.view=function(a){c.go("user-view",{userId:a})}}function b(a,b,c,d){a.user=new d({}),a.canSubmit=function(){return a.user_form.$valid},a.revert=function(){a.user=new d({})},a.submitForm=function(){a.user.$save(function(){c.logSuccess("Usuario creado"),b.go("user-view",{userId:a.user.id})})["catch"](function(a){c.logError("Error al crear usuario, verifique los datos")})}}function c(a,b,c,d,e,f,g,h,i,j,k,l,m){a.user={},a.competitions=[],a.account=l,a.roles=[],a.centers=[],a.organizations=[],a.isRoleCollapsed=!0,a.isCenterCollapsed=!0,a.change_password=!1,a.changePassword=function(){a.change_password=!0},a.canSubmit=function(){return a.user_form.$valid},c.get({id:f.userId},function(b){a.user=b,a.fetchRoles(),a.fetchCenters(),a.fetchOrganizations()}),a.submitForm=function(){a.user.id==a.account.profile_id?g.put(m+"/api/me",a.user).success(function(a){h.logSuccess("Tus datos actualizados")}):a.user.$update(function(){h.logSuccess("Usuario actualizado")})["catch"](function(a){h.logError("Error al actualizar usuario, verifique los datos")})},a.fetchRoles=function(){i.query(function(b){a.roles=b,_.each(a.user.roles,function(b){var c=_.find(a.roles,function(a){return b.id==a.id});c.assigned=!0})})},a.fetchCenters=function(){j.query(function(b){a.centers=b,_.each(a.user.centers,function(b){var c=_.find(a.centers,function(a){return b.id==a.id});c.assigned=!0})})},a.fetchOrganizations=function(){k.query(function(b){a.organizations=b,_.each(a.user.organizations,function(b){var c=_.find(a.organizations,function(a){return b.id==a.id});c.assigned=!0})})},a.saveRoles=function(){var b=_.filter(a.roles,function(a){return a.assigned});g.post(m+"/api/users/assign/roles",{userId:a.user.id,roles:b}).success(function(a){h.logSuccess("Roles asignados")})},a.saveCenters=function(){var b=_.filter(a.centers,function(a){return a.assigned});g.post(m+"/api/users/assign/centers",{userId:a.user.id,centers:b}).success(function(a){h.logSuccess("Centros asignados")})},a.saveOrganizations=function(){var b=_.filter(a.organizations,function(a){return a.assigned});g.post(m+"/api/users/assign/organizations",{userId:a.user.id,organizations:b}).success(function(a){h.logSuccess("Organizaciones asignadas")})},a.revertRoles=function(){a.fetchRoles()},a.revertCenters=function(){a.fetchCenters()},a.revertOrganizations=function(){a.fetchOrganizations()}}angular.module("app.users").controller("users-list",["$scope","$window","$state","User",a]).controller("users-edit",["$scope","$state","logger","User",b]).controller("users-view",["$scope","$window","User","$location","$state","$stateParams","$http","logger","Role","Center","Organization","Account","api_host",c])}();